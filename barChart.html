<!DOCTYPE html>
<html>

<head>
    <title>World population</title>
    <script src="Chart.bundle.js"></script>
    <script src="utils.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">

    <style>
        li {
            list-style-type: none;
        }

        .label {
            margin-left: 5px;
            font-family: 'Source Sans Pro', sans-serif;
            color: #666666;
            font-size: 14px;
        }

        .legendValue {
            float: left;
            height: 25px;
        }
    </style>

</head>

<body>
    <div class="wrapper">
        <h1>Total Remainning Reject (CV,OM,GC)</h1>
        <h2>Chart Stacked Bar & Line</h2>

        <canvas id="mybarChart" width="1600" height="900"></canvas>
        <div id="legend"></div>
    </div>

    <script src="stacked.js"></script>

    <script>
        var ctx = document.getElementById("mybarChart");

        var mybarChart = new Chart(ctx, {

            type: 'bar',
            responsive: true,
            data: chartData,
            onAnimationComplete: function () {
                var ctx = this.chart.ctx;
                ctx.font = this.scale.font;
                ctx.fillStyle = this.scale.textColor

                this.datasets.forEach(function (dataset) {
                    dataset.points.forEach(function (points) {
                        ctx.fillText(points.value, points.x, points.y - 10);
                    });
                })
            },
            options: {
                legend: {
                    display: false,
                    position: 'bottom'
                },
                legendCallback: function (chart) {
                    var text = [];
                    text.push('<ul class="' + chart.id + '-legend">');
                    //for (var i = 0; i < chart.data.datasets.length; i++) {
                    for (var i = 0; i < 6; i++) {
                        text.push('<li><div class="legendValue"><span style="background-color:' + chart.data.datasets[i].backgroundColor + '">&nbsp;&nbsp;&nbsp;&nbsp;</span>');

                        if (chart.data.datasets[i].label) {
                            text.push('<span class="label">' + chart.data.datasets[i].label + '&nbsp;&nbsp;&nbsp;&nbsp;</span>');
                        }

                        text.push('</div></li>');
                    }

                    text.push('</ul>');

                    return text.join('');
                },
                scales: {
                    xAxes: [{
                        stacked: true,
                    }],
                    yAxes: [{
                        stacked: true
                    }]
                }
            }
        });

        // Create our legend
        $('#legend').prepend(mybarChart.generateLegend());
    </script>

</body>

</html>